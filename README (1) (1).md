
# 視覚障害者向けリアルタイム信号機検出＆音声フィードバックアプリ

このプロジェクトは、視覚障害者の方々が交差点での信号機の状態をリアルタイムで把握できるように設計されたStreamlitアプリケーションです。カメラフィードを使用して信号機を検出し、その色（赤、黄、緑）を判別し、音声でフィードバックを提供します。

## 機能

*   **リアルタイムカメラフィード**: ライブカメラ映像を表示します。
*   **YOLOv8nによる信号機検出**: YOLOv8nモデルを使用して、映像内の信号機をリアルタイムで検出します。
*   **信号機の色判別**: 検出された信号機の色（赤、黄、緑）を自動的に判別します。
*   **音声フィードバック**: 判別された信号機の状態を音声（例: 「信号は赤です。止まってください。」）でユーザーに伝えます。
*   **ユーザーフレンドリーなインターフェース**: Streamlitを用いて、直感的で操作しやすいウェブインターフェースを提供します。

## セットアップと実行方法

### 1. リポジリポジトリのクローン

まず、このGitHubリポジトリをローカルマシンにクローンします。

```bash
git clone <your-repository-url> # 実際のリポジトリURLに置き換えてください
cd <your-repository-name>
```

### 2. Python環境のセットアップと依存関係のインストール (uv を使用)

このプロジェクトでは、`uv` を使用して依存関係を効率的に管理およびインストールすることをお勧めします。`uv`はPythonパッケージインストーラーであり、`pip`よりも高速に動作します。

#### `uv`のインストール

`uv`がまだインストールされていない場合は、以下のコマンドでインストールできます。

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```
または、`pip`を使ってインストールすることもできます（推奨されませんが、代替手段として）。
```bash
pip install uv
```
`uv`がインストールされていることを確認するには、以下のコマンドを実行します。
```bash
uv --version
```

#### 仮想環境の作成とアクティベート

プロジェクトディレクトリ内で仮想環境を作成し、アクティベートします。

```bash
uv venv # または python -m venv venv
source .venv/bin/activate # Linux/macOS
# .venv\Scripts\activate # Windows (PowerShell)
# .venv\Scripts\activate.bat # Windows (cmd.exe)
```

#### 依存関係のインストール

アクティベートされた仮想環境で、`requirements.txt`ファイルからすべての依存関係をインストールします。

```bash
uv pip install -r requirements.txt
```

### 3. Streamlitアプリケーションの実行

すべての依存関係がインストールされたら、以下のコマンドでStreamlitアプリケーションを起動できます。

```bash
streamlit run streamlit_app.py
```

アプリケーションが正常に起動すると、ターミナルにローカルURLとネットワークURLが表示されます。ウェブブラウザでそのURLを開き、アプリケーションにアクセスしてください。

### 4. 実行後の操作

*   Streamlitアプリケーションのインターフェースで「カメラ起動」ボタンをクリックして、カメラフィードを開始します。
*   検出された信号機がフレーム上にバウンディングボックスと色ラベルとともに表示され、音声フィードバックが流れることを確認します。
*   「ストップ」ボタン（通常、サイドバーに配置されています）をクリックして、カメラフィードと検出処理を停止します。

### 補足

*   アプリケーションの実行には、ウェブカメラが接続されている必要があります。
*   `gTTS`はGoogleのテキスト読み上げAPIを使用するため、インターネット接続が必要です。
*   `pydub`は音声再生に`ffmpeg`を必要とします。Colab環境では通常プリインストールされていますが、ローカル環境で問題が発生した場合は`ffmpeg`をインストールしてください。

```bash
# Ubuntu/Debian系の場合
sudo apt update
sudo apt install ffmpeg
```

---
